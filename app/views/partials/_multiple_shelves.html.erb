<% split_index = 0 %>
<% (shelf.ferns.length / 3).times do %>
  <div class="has-bg-img row">
    <% single_shelf = shelf.ferns.slice(split_index, 3) %>
    <% split_index += 3 %>
    <% single_shelf.each do |fern| %>
      <div class="col-sm-4 text-center greenhouse-fern" id=<%=fern.id%>-<%=fern.name%>>
        <%= link_to image_tag(fern.image, class: 'fern-image', alt: 'fern health image', id: "fern-#{fern.id}"), fern_path(fern.id) %><br>
        <p class="fern-name-tag"><%= fern.name %></p>
      </div>
    <% end %>
  </div>
<% end %>
<% if (shelf.ferns.length % 3) > 0 %>
  <div class="has-bg-img row">
    <% single_shelf = shelf.ferns.slice((shelf.ferns.index(shelf.ferns.last) - (shelf.ferns.length % 3) + 1), (shelf.ferns.length % 3)) %>
    <% single_shelf.each do |fern| %>
      <div class="col-sm-4 text-center greenhouse-fern" id=<%=fern.id%>-<%=fern.name%>>
        <%= link_to image_tag(fern.image, class: 'fern-image', alt: 'fern health image', id: "fern-#{fern.id}"), fern_path(fern.id) %><br>
        <p class="fern-name-tag"><%= fern.name %></p>
      </div>
    <% end %>
  </div>
<% end %>